<%= render 'layouts/customer_header'%>
<%= render 'layouts/customer_profile'%>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.3.3/js/swiper.min.js"></script>
<div class="row place_show">
	<div class="col-lg-10">
		<h1>スポット詳細</h1>
		<!-- 登録者が本人の場合表示しない -->
		<% unless @place.customer_id == current_customer.id%>
			<div>
				<h3>登録者名</h3>
				<%= @place.customer.nick_name%>
			</div>
		<% end %>
		<% if @place.place_images.blank? %>
			<h1>画像はありません</h1>
		<% else %>
		<div class="swiper-container">
			<div class="swiper-wrapper">
				<% @place.place_images.each do |image|%>
					<div class="swiper-slide"><%= attachment_image_tag image, :image, class: "default_image", size: "600x300" %></div>
				<% end %>
			</div>
				<div class="swiper-button-prev"></div>
				<div class="swiper-button-next"></div>
				<div class="swiper-pagination"></div>
		</div>
		<% end %>
		<div>
		<h3>ジャンル</h3>
			<% if @place.genre.blank? %>
				<p>ジャンルなし</p>
			<% else %>
				<p><%= @place.genre.name%></p>
			<% end %>
		</div>

		<div>
			<h3>場所名</h3>
				<p><%= @place.place_name%></p>
			<h3>住所</h3>
				<p><%= @place.address%></p>
				<%= render partial: 'public/places/map', locals: { place: @place }%>
		</div>
		<div>
			<h3>場所URL</h3>
			<!-- 登録者本人の場合の表示 -->
			<% if @place.customer_id == current_customer.id %>
				<% if @place.place_url.blank? %>
					<%= link_to "お店のURLを登録しよう！！", edit_public_place_path(@place.id),class: "btn btn-info"%>
				<% else %>
					<p><%= @place.place_url%></p>
				<% end %>
			<% else %>
			<!-- 登録者以外の表示 -->
				<% if @place.place_url.blank? %>
					<p>????</p>
				<% else %>
					<%= @place.place_url%>
				<% end %>
			<% end %>
		</div>

		<div>
			<h3>お店の電話番号</h3>
		<!-- 登録者本人の場合 -->
		<% if @place.customer_id == current_customer.id %>
			<% if @place.number.blank? %>
				<%= link_to "電話番号を登録しよう！！", edit_public_place_path(@place.id),class: "btn btn-info"%>
			<% else %>
				<%= @place.number%>
			<% end %>
		<% else %>
		<!-- 登録者以外の表示 -->
			<% if @place.number.blank? %>
				<p>????</p>
			<% else %>
				<%= @place.number%>
			<% end %>
		<% end %>
		</div>

		<div>
			<h3>平均予算</h3>
			<% if @place.customer_id == current_customer.id %>
				<% if @place.budget.nil? %>
					<%= link_to "平均予算を登録しよう！！", edit_public_place_path(@place.id),class: "btn btn-info"%>
				<% else %>
					<%= @place.budget%>円
				<% end %>
			<% else %>
				<% if @place.budget.nil? %>
					<p>????円</p>
				<% else %>
					<%= @place.budget%>円
				<% end %>
			<% end %>
		</div>
		<div>
			<h3>メモ</h3>
			<% if @place.customer_id == current_customer.id %>
				<% if @place.detail.nil? %>
					<%= link_to "メモ", edit_public_place_path(@place.id),class: "btn btn-info"%>
				<% else %>
					<%= @place.detail%>
				<% end %>
			<% else %>
				<% unless @place.detail.nil? %>
					<%= @place.detail%>
				<% end %>
			<% end %>
		</div>

	</div>
		<div class="col-lg-2">
			<% if @place.customer_id == current_customer.id %>
				<div class="place_show__link"><%= link_to "編集する", edit_public_place_path(@place.id),class: "btn btn-success" %></div>
				<div class="place_show__link"><%= link_to "削除", public_place_path(@place.id), method: :delete , class: "btn btn-danger"%></div>
			<% end %>
			<div class="place_show__like">
				<div id="likes_buttons">
	             <%= render partial: 'public/likes/like', locals: { place: @place } %>
	          	</div>
			</div>
		</div>
		<%= javascript_include_tag "public/place_image.js" %>
</div>