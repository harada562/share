<%= render 'layouts/customer_header' %>
<%= render 'layouts/customer_profile' %>
<div class="row">
	<div class="col-lg-12 customer_index__h1">
		<h1>ユーザー一覧画面</h1>
	</div>
</div>
<div class="row">
	<div class="col-lg-12 customer_index">
		<div class="customer_index__search form-group">
			<%= search_form_for @q, url: public_customers_path do |f| %>
				<%= f.search_field :nick_name_cont ,placeholder:"ニックネームを入力してください", size: '30', class: "form-control"%>
				<%= f.submit "検索" %>
			<% end %>
		</div>
		<% if @ransack_customer.blank? %>
			<table class="table">
				<tr>
					<th>プロフィール画像</th>
					<th>ニックネーム</th>
					<th>スポット投稿数</th>
					<th>グループ加入数</th>
					<th></th>
				</tr>
				<tr>
					<% @customers.each do |customer| %>
					<td><%= attachment_image_tag customer, :image, :fill, 50, 50, fallback: "profile.png", size:'80x80', class: "img-circle"%></td>
					<td><%= customer.nick_name %></td>
					<td><%= Place.where(customer_id: customer.id).count%></td>
					<td><%= GroupsCustomer.where(customer_id: customer.id).count%></td>
					<td><%= link_to "詳細画面", public_customer_path(customer.id),class: "btn btn-success" %></td>
				</tr>
				<% end %>
			</table>
			<%= paginate @customers %>
		<% else %>
			<table class="table">
				<tr>
					<th>プロフィール画像</th>
					<th>ニックネーム</th>
					<th>スポット投稿数</th>
					<th>グループ加入数</th>
					<th></th>
				</tr>
				<tr>
					<% @ransack_customer.each do |customer| %>
					<td><%= attachment_image_tag customer, :image, :fill, 50, 50, fallback: "profile.png", size:'80x80', class: "img-circle"%></td>
					<td><%= customer.nick_name %></td>
					<td><%= Place.where(customer_id: customer.id).count%></td>
					<td><%= GroupsCustomer.where(customer_id: customer.id).count%></td>
					<td><%= link_to "詳細画面", public_customer_path(customer.id),class: "btn btn-success" %></td>
				</tr>
				<% end %>
			</table>
			<%= paginate @customers %>
		<% end %>
	</div>
</div>